<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Happy Birthday ðŸŽ‚ðŸ’–</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      min-height: 100vh;
      font-family: 'Quicksand', 'Comic Sans MS', cursive, sans-serif;
      background: #fde4ec;
      overflow-x: hidden;
    }
    /* Confetti BG */
    .confetti {
      position: fixed;
      pointer-events: none;
      left: 0; top: 0; width: 100vw; height: 100vh; z-index:0;
    }
    .container {
      position: relative;
      text-align: center;
      width: 100vw;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      z-index: 1;
    }
    .title {
      font-family: 'Pacifico',cursive;
      font-size: 2.4em;
      color: #e91e63;
      margin-bottom: 5px;
      letter-spacing: 2px;
      text-shadow: 0 3px 16px #fff;
    }
    /* Cuter Heart Button */
    .heart-btn {
      width: 140px; height: 127px;
      position: relative;
      cursor: pointer;
      margin-bottom: 38px;
      margin-top: 28px;
      display: inline-block;
      background: transparent;
      filter: drop-shadow(0 7px 26px #ffb6c175);
      animation: bounce 1.1s infinite alternate;
      transition: filter .15s;
    }
    .heart-btn svg {
      display: block;
      width: 100%; height:100%;
    }
    .heart-btn:hover {
      filter: drop-shadow(0 7px 40px #ff8ec8cc);
    }
    .heart-btn .sparkle {
      position: absolute;
      left: 94px;
      top: 37px;
      width: 15px; height: 15px;
      pointer-events: none;
      animation: sparkleFade 1.2s infinite;
    }
    @keyframes bounce {
      to { transform: scale(1.06) translateY(-7px);}
    }
    @keyframes sparkleFade {
      0% { opacity: 0.3; transform: scale(0.26);}
      75% { opacity: 0.9; transform: scale(1);}
      100% { opacity:.1; }
    }
    .heart-btn span {
      position: absolute;
      top: 56px; left: 0; width: 100%;
      color: #d81b60;
      font-size: 1.3em;
      font-weight: bold;
      user-select: none;
      text-align: center;
      font-family: 'Pacifico', cursive;
      letter-spacing: 1.3px;
      text-shadow: 0 2px 8px #fff;
    }
    .subnote {
      margin-bottom:24px;
      font-size:1.15em;
      color:#ff4081;
      opacity:.8;
      font-style:italic;
    }
    .hide { display: none !important; }
    /* Tree + Balloon */
    .treeanime {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 25px 0;
      animation: fadein 1s;
      position: relative;
    }
    @keyframes fadein {
      from { opacity: 0; transform: translateY(35px);}
      to { opacity: 1; transform: translateY(0);}
    }
    .balloon {
      position: absolute;
      left: 44px; top: -66px;
      z-index: 1;
      animation: balloonfloat 2.5s infinite alternate ease-in-out;
    }
    @keyframes balloonfloat {
      to { transform: translateY(-30px);}
    }
    /* Music Controls */
    .music-control {
      position: fixed;
      right: 24px; bottom: 18px;
      background: #fff3fa;
      border-radius: 50%;
      box-shadow: 0 3px 12px #fe94b7aa;
      width:48px; height:48px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 101;
      transition: background .2s;
    }
    .music-control svg { width:28px; height:28px;}
    .music-control:hover { background: #ffe2ef;}
    .bnote {
      color: #f06292;
      font-size: 1.18em;
      margin-bottom:12px;
      margin-top:11px;
      animation: fadein 1.2s;
    }
    .bdaywish {
      font-size: 2.1em;
      color: #d81b60;
      margin: 35px auto 12px;
      animation: wishPop 1s;
      font-family: 'Pacifico', cursive;
      font-weight: bold;
      text-shadow: 0 3px 22px #fff9;
      max-width: 600px;
    }
    @keyframes wishPop {
      0% { transform: scale(0.86); opacity: 0;}
      78% { transform: scale(1.09); opacity: 1;}
      100% { transform: scale(1); }
    }
    .qna {
      font-size: 1.18em;
      margin: 18px 0;
      background: #fff2f9cc;
      border-radius: 17px;
      display: inline-block;
      padding: 33px 40px;
      box-shadow: 0 3px 14px #fd9cce37;
      color: #ba1862;
      animation: fadein 0.8s;
      min-width: 220px;
      max-width: 93vw;
    }
    .qna input {
      padding: 7px 13px;
      border: 1.7px solid #e88;
      border-radius: 7px;
      outline: none;
      font-size: 1.17em;
      background: #ffe0ed;
      margin-top: 13px;
      color: #c2185b;
      margin-right: 7px;
    }
    .qna button {
      padding: 6px 18px;
      background: #ffb6d5;
      border: none;
      border-radius: 8px;
      font-size: 1em;
      color: #c2185b;
      font-weight: bold;
      cursor: pointer;
      transition: background .17s, transform .12s;
      margin-top: 13px;
      box-shadow: 0 1px 4px #fb9fc965;
    }
    .qna button:hover {
      background: #f36ba6;
      color:#fff;
      transform: scale(1.11);
    }
    .hearts {
      pointer-events: none;
      position: fixed;
      left: 0; top: 0; width: 100vw; height: 100vh;
      z-index: 1001;
    }
    .hearts span {
      position: absolute;
      width: 24px; height:24px;
      background: url('data:image/svg+xml;utf8,<svg fill="pink" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 29.6"><path d="M23.6,0c-2.7,0-5.1,1.3-6.6,3.3C15.5,1.3,13.1,0,10.4,0C4.7,0,0,4.7,0,10.4c0,11,16,19.2,16,19.2s16-8.2,16-19.2C32,4.7,27.3,0,23.6,0z"/></svg>');
      background-size: cover;
      animation: floatHearts 3s ease-in infinite;
      opacity: .91;
      will-change: transform, opacity;
    }
    @keyframes floatHearts {
      0% { opacity: 0; transform: scale(0.7) translateY(0);}
      13% { opacity: 1;}
      100% { opacity: 0; transform: scale(1.25) translateY(-205px);}
    }
    ul.qna-summary {
      font-size: 0.78em;
      color:#b7006d;
      margin-top:1.3em;
      text-align:left;
      max-width:370px;
      margin-left:auto;
      margin-right:auto;
      padding-left: 0;
    }
    ul.qna-summary li {
      margin-bottom:9px;
      list-style: none;
      border-left: 4px solid #ecb8ea;
      padding-left: 7px;
    }
    @media (max-width:600px) {
      .treeanime { transform: scale(0.83);}
      .heart-btn { width: 99px;height: 92px;}
      .heart-btn span { font-size: 1em;}
      .title { font-size:1.44em; margin-top:0; }
      .qna { font-size:1.04em;padding:20px 6vw;}
      .bdaywish {font-size:1em;}
    }

  </style>
</head>
<body>

<!-- Confetti Canvas -->
<canvas class="confetti" id="confetti"></canvas>

<div class="container" id="step-heart">
  <div class="title">ðŸ’– Birthday Surprise ðŸ’–</div>
  <div class="subnote">Hey beautiful, click the pink heart to start your surprise! ðŸ¥°</div>

  <div class="heart-btn" id="heart-btn">
    <!-- Pretty SVG Heart -->
    <svg viewBox="0 0 100 90">
      <path
        d="M50 80
         L15 45
         Q0 27, 25 15
         Q45 5, 50 25
         Q55 5, 75 15
         Q100 27, 85 45
         Z"
        fill="#ffb6d5" stroke="#ee83b5" stroke-width="2"/>
    </svg>
    <span>Click Me! ðŸ’—</span>
    <!-- Sparkle -->
    <img class="sparkle" src="data:image/svg+xml;utf8,<svg fill='gold' height='15' width='15' xmlns='http://www.w3.org/2000/svg'><polygon points='7.5,0 9,6 15,7.5 9,9 7.5,15 6,9 0,7.5 6,6'/></svg>"/>
  </div>
</div>

<!-- Tree Step -->
<div class="container hide" id="step-tree">
  <div class="treeanime">
    <!-- Balloon SVG -->
    <svg class="balloon" width="60" height="120" viewBox="0 0 60 120">
     <ellipse cx="30" cy="34" rx="25" ry="30" fill="#ffeb3b" stroke="#f8bbd0" stroke-width="2"/>
     <ellipse cx="30" cy="66" rx="10" ry="12" fill="#ffeaea"/>
     <line x1="30" y1="64" x2="32" y2="110" stroke="#ba1862" stroke-width="2"/>
    </svg>
    <!-- SVG Tree Animation -->
    <svg id="tree" width="120" height="180" viewBox="0 0 120 180">
      <!-- trunk -->
      <rect x="54" y="90" width="12" height="58" fill="#8d6e63">
        <animate attributeName="y" from="180" to="90" dur="1s" fill="freeze"/>
      </rect>
      <!-- leaves -->
      <ellipse id="leaf1" cx="60" cy="80" rx="40" ry="38" fill="#81c784" opacity="0">
        <animate attributeName="opacity" from="0" to="1" begin="0.8s" dur="0.6s" fill="freeze"/>
      </ellipse>
      <ellipse id="leaf2" cx="60" cy="54" rx="28" ry="26" fill="#43a047" opacity="0">
        <animate attributeName="opacity" from="0" to="1" begin="1.2s" dur="0.6s" fill="freeze"/>
      </ellipse>
      <!-- flowers (hearts) -->
      <g id="flowers" opacity="0">
        <animate attributeName="opacity" from="0" to="1" begin="1.8s" dur="0.5s" fill="freeze"/>
        <circle cx="85" cy="70" r="7" fill="pink"/>
        <circle cx="40" cy="68" r="7" fill="#ffb6c1"/>
        <circle cx="60" cy="36" r="6" fill="#fe94b7"/>
      </g>
    </svg>
    <div style="font-size:1.2em; margin-top:17px; color:#af47a8;">
      ðŸŒ³ Here grows a special tree, just for you... &nbsp;<b>Happy Birthday!</b> ðŸŽˆ
    </div>
  </div>
  <div class="bnote">Let's make a little magic âœ¨</div>
</div>

<!-- Music -->
<audio id="bgmusic" src="https://impoddarak.github.io/Birthday/aud.mp3" loop></audio>

<!-- Music Play/Pause -->
<div class="music-control" id="music-ctrl" title="Pause/Play music" style="display:none;">
  <svg id="music-icon-play" style="display:block;" viewBox="0 0 36 36"><circle cx="18" cy="18" r="16" fill="#ffb6d5"/><polygon points="14,10 28,18 14,26" fill="#e91e63"/></svg>
  <svg id="music-icon-pause" style="display:none;" viewBox="0 0 36 36"><circle cx="18" cy="18" r="16" fill="#ffb6d5"/><rect x="12" y="10" width="4" height="16" fill="#e91e63"/><rect x="20" y="10" width="4" height="16" fill="#e91e63"/></svg>
</div>

<!-- QnA Step -->
<div class="container hide" id="step-qna"></div>

<!-- Birthday Wish -->
<div class="container hide" id="step-wish">
  <div class="bdaywish" id="bdaywish">
    ðŸŽ‰ Happy Birthday, <span id="gf-name">lovely girl!</span><br>
    You light up my world in the sweetest ways. I'm lucky to have you.<br>
    I hope this day is as amazing as **you** are! ðŸ’‹<br>
    <span style="font-size:.55em;font-family:'Quicksand',sans-serif;color:#ad1457;margin-top:14px;display:inline-block;">(see your answers below!)</span>
  </div>
</div>
<!-- Floating Hearts -->
<div class="hearts hide" id="hearts"></div>

<script>
  // ---- Confetti ----
  // Credit: https://codepen.io/lemmin/pen/jgLooP
  const confetti = document.getElementById('confetti');
  let cCTX = confetti.getContext('2d');
  let pieces = [];
  function resizeC() {
    confetti.width = window.innerWidth;
    confetti.height = window.innerHeight;
  }
  window.addEventListener('resize', resizeC);
  function randomColor() {
      const colors = ['#ffb6d5', '#ffd6e0', '#fffde4','#ffe18d','#bde9ec','#b5dfff','#f8bbd0','#fe94b7'];
      return colors[Math.floor(Math.random() * colors.length)];
  }
  function ConfettiPiece() {
      this.x = Math.random() * confetti.width;
      this.y = Math.random() * confetti.height - 80;
      this.r = 6 + Math.random() * 12; // radius/size
      this.d = Math.random() * 90 + 50; // density/speed
      this.color = randomColor();
      this.tilt = Math.floor(Math.random() * 7) - 3;
      this.tiltAngleIncremental = (Math.random() * 0.07) + .01;
      this.tiltAngle = 0;
      this.alpha = 0.7 + Math.random() * 0.26;
  }
  function drawConfetti() {
      cCTX.clearRect(0,0,confetti.width, confetti.height);
      for(let i=0; i<pieces.length;i++){
          let p = pieces[i];
          cCTX.beginPath();
          cCTX.lineWidth = p.r/2;
          cCTX.strokeStyle = p.color;
          cCTX.globalAlpha = p.alpha;
          cCTX.moveTo(p.x + p.tilt + p.r/3, p.y);
          cCTX.lineTo(p.x + p.tilt, p.y + p.tilt + p.r);
          cCTX.stroke();
      }
      moveConfetti();
  }
  function moveConfetti() {
      for(let i=0; i<pieces.length;i++){
          let p = pieces[i];
          p.y += (Math.cos(.12 + p.d) + 2 + p.r/1.5)/1.6;
          p.x += Math.sin(0);
          p.tiltAngle += p.tiltAngleIncremental;
          p.tilt = Math.sin(p.tiltAngle)*12;
          if(p.y > confetti.height){
              p.x = Math.random() * confetti.width;
              p.y = -20;
          }
      }
  }
  function loopConfetti() {
      requestAnimationFrame(loopConfetti);
      drawConfetti();
  }
  function setupConfetti() {
      pieces=[];
      for(let i=0; i<48; i++)
          pieces.push(new ConfettiPiece());
      resizeC();
      loopConfetti();
  }
  setupConfetti();

  // ---- End confetti ----

  // QnA & Logic
  const QUESTIONS = [
    {q: "If you close your eyes and picture happiness, what do you see? ðŸ’­", a: ""},
    {q: "What's your favorite memory of us (so far)? ðŸ¥°", a: ""},
    {q: "Describe me in one cute word! ðŸ˜‡", a: ""},
    {q: "On a scale of 1-10... How awesome is your birthday today? ðŸŽ‚", a: ""}
  ];
  // Step Control
  const stepHeart = document.getElementById('step-heart');
  const stepTree = document.getElementById('step-tree');
  const stepQna = document.getElementById('step-qna');
  const stepWish = document.getElementById('step-wish');
  const bdaywish = document.getElementById('bdaywish');
  const hearts = document.getElementById('hearts');
  const bgmusic = document.getElementById('bgmusic');
  // Music control UI
  const mctrl = document.getElementById('music-ctrl');
  const mIcPlay = document.getElementById('music-icon-play');
  const mIcPause = document.getElementById('music-icon-pause');
  let musicPlaying = false;

  // --- Step 1: HEART > TREE ---
  document.getElementById('heart-btn').onclick = function() {
    stepHeart.classList.add('hide');
    stepTree.classList.remove('hide');
    // Play music after a second
    setTimeout(() => {
      bgmusic.volume = .28;
      bgmusic.play();
      musicPlaying = true;
      mctrl.style.display='flex';
      mIcPlay.style.display='none';
      mIcPause.style.display='block';
    }, 700);
    setTimeout(() => {
      stepTree.classList.add('hide');
      showNote("Before your wish... a few fun questions! ðŸ’¬");
      setTimeout(startQna, 1700);
    }, 3200);
  };

  // --- Music Controls ---
  mctrl.onclick = function() {
    if(musicPlaying){
      bgmusic.pause();
      mIcPlay.style.display='block';mIcPause.style.display='none';
      musicPlaying=false;
    } else {
      bgmusic.play();
      mIcPlay.style.display='none';mIcPause.style.display='block';
      musicPlaying=true;
    }
  }

  // --- Show interim little notes
  function showNote(msg) {
    let n = document.createElement('div');
    n.textContent = msg;
    n.className = "bnote";
    document.body.appendChild(n);
    setTimeout(()=>n.remove(), 1600);
  }

  // --- Step 2: QnA Step
  let qIndex = 0;
  function startQna() {
    stepQna.classList.remove('hide');
    showQA(qIndex);
  }

  function showQA(idx) {
    if (idx >= QUESTIONS.length) {
      stepQna.classList.add('hide');
      showWish();
      return;
    }
    stepQna.innerHTML = `
      <div class="qna" style="animation-delay:0.15s;">
        <div style="margin-bottom:14px;font-family:'Pacifico',cursive;font-size:1.1em;">${QUESTIONS[idx].q}</div>
        <input type="text" id="ans${idx}" placeholder="Type here..." autofocus maxlength="62">
        <button onclick="submitQ(${idx})">Next</button>
      </div>
    `;
    setTimeout(()=>{ document.getElementById('ans'+idx).focus(); },90);
  }

  // Submit on Enter key
  stepQna.addEventListener('keydown', function(e){
    if(e.key==='Enter'){
      let input = stepQna.querySelector('input');
      if(input){ input.nextElementSibling.click(); }
    }
  });

  window.submitQ = (idx) => {
    let input = document.getElementById('ans'+idx);
    if(input.value.trim()) {
      QUESTIONS[idx].a = input.value.trim();
      qIndex++;
      showQA(qIndex);
    } else {
      input.style.border = "2.3px solid #d81b60";
      input.focus();
    }
  };

  // --- Step 3: Final Birthday Wish + Hearts
  function showWish() {
    stepWish.classList.remove('hide');
    showHearts();
    // if you want to personalize: let name = QUESTIONS[1].a; // for example
    // document.getElementById('gf-name').textContent = name || "Special Girl!";
    // Show Q&A summary
    let qnaSummary = QUESTIONS.map(
      q=> `<li><b>${q.q}</b><br><i>${q.a}</i></li>`
      ).join("");
    bdaywish.innerHTML +=
      `<ul class="qna-summary">${qnaSummary}</ul>`;
    showNote("You made it! Now make a wish! ðŸŽ‚");
  }

  // --- Hearts pop-up
  function showHearts() {
    hearts.innerHTML = "";
    hearts.classList.remove('hide');
    for(let i=0;i<20;i++){
      let h = document.createElement('span');
      h.style.left = (Math.random()*97)+'vw';
      let size = 19+Math.random()*27;
      h.style.width = h.style.height = size+'px';
      h.style.bottom = "-27px";
      h.style.opacity = .7+Math.random()*.3;
      h.style.animationDuration = (2 + Math.random()*1.6)+"s";
      h.style.animationDelay = (Math.random()*0.7)+"s";
      hearts.appendChild(h);
    }
    setTimeout(()=>hearts.classList.add('hide'), 3100);
  }
</script>
</body>
</html>
